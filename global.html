<!DOCTYPE html><html><head>    <title>AltTranslate</title>	<script type="text/javascript" src="http://www.google.com/jsapi"></script>		<script>	google.load("language", "1");		safari.application.addEventListener('message',function( theMessageEvent ){		if( theMessageEvent.name == "searchThis" ){			var res = searchWord( theMessageEvent );		}	},false);		function searchWord( theMessageEvent ){		var translateTo = safari.extension.settings[ 'language' ];		var word = theMessageEvent.message;		google.language.detect(word, function(result) {			if (!result.error && result.language) {				if( result.language == translateTo ){					translateTo = safari.extension.settings[ 'secondary' ];				}				google.language.translate(word, result.language, translateTo, function(result) {					if (result.error) {						//翻訳時エラー						theMessageEvent.target.page.dispatchMessage('searchResult', result.message);					}else{						theMessageEvent.target.page.dispatchMessage('searchResult', result.translation);					}				});			}else{				//言語判定時エラー				theMessageEvent.target.page.dispatchMessage('searchResult', result.message);			}		});	}		</script>	</head><body></body></html>